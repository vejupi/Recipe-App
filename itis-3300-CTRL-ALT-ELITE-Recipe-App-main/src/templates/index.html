<!DOCTYPE html>
<html lang = "en">
<head>
    <meta charset ="UTF-8">
    <title>CTRL-ALT-EAT</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>
<body> 
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <script>
            alert("{{ messages[0] }}");  // Displays the first flash message as a standard alert
        </script>
    {% endif %}
{% endwith %}

<!-- Your existing HTML content -->
    <header>
        <h1 id="page-title">CTRL-ALT-EAT</h1>
        <nav>
            <ul class ="nav-tabs"> <!--possible nav tabs and other HTML pages-->
                <li><a href="{{ url_for('home') }}">Home</a></li>
                <li><a href="{{ url_for('recipesPage') }}">Recipes</a></li>
                <li><a href="{{ url_for('profilePage') }}">Profile</a></li>
                <li><a href="{{ url_for('logout') }}">Logout</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class = "search"> <!--Search bar prototype & possibly move this to another page for search and or use mini version in top right-->
            <h2>Recipe Browser</h2>
            <form action="{{url_for('search_recipe')}}" method="post">
                <input type="text" placeholder="Search..." class="search-input" name = "search_name">
                <input id="search-submit" type="submit" value="Submit">
            </form>
        </div>

        <!-- button that opens up post recipe form  -->
        <button type="button" id="add-recipe-button">Add Recipe</button>

                <div id="recipe-form" style="display:none;">
                    
                    <form action="{{ url_for('create_recipe') }}" method="post">
                        <label for="recipe_name">Recipe Name:</label>
                        <input type="text" id="recipe_name" name="recipe_name">
                        <label for="recipe_description">Recipe Description:</label>
                        <input type="text" id="recipe_description" name="recipe_description">
                        <label for="recipe_ingredients">Recipe Ingredients:</label>
                        <input type="text" id="recipe_ingredients" name="recipe_ingredients">
                        <label for="recipe_measurements">Recipe Measurements:</label>
                        <input type="text" id="recipe_measurements" name="recipe_measurements">
                        <label for="recipe_instructions">Recipe Instructions:</label>
                        <input type="text" id="recipe_instructions" name="recipe_instructions">
                        <input id="recipe-submit" type="submit" value="Submit">
                    </form>
                </div>
            </div>
            <div class="recipe-list">
                <h2>Recipes</h2>
                    {% for recipe in recipes %}
                    
                        <div class="recipe-item">
                            <h3>{{ recipe['recipe_name'] }}</h3>
                            <p><strong>Description:</strong> {{ recipe['recipe_description'] }}</p>
                            <p><strong>Ingredients:</strong> {{ recipe['recipe_ingredients'] }}</p>
                            <p><strong>Measurements:</strong> {{ recipe['recipe_measurements'] }}</p>
                            <p><strong>Instructions:</strong> {{ recipe['recipe_instructions'] }}</p>
                            
                            {% if session['user_id'] == recipe['recipe_author_id'] %}
                            <a href="{{ url_for('edit_recipe', recipe_id=recipe['recipe_id']) }}">Edit Recipe</a>
                            
                            
                            <form action="{{ url_for('delete_recipe', recipe_id=recipe['recipe_id']) }}" method="post" style="display:inline;">
                                <button id="delete-button" type="submit" onclick="return confirm('Are you sure you want to delete this recipe?')">
                                    Delete
                                </button>
                            
                            </form>
                            {% endif %}
                        </div>
                    
                    {% endfor %}
            </div>



    </main> 
    <footer>
        <p>&copy; 2024 CTRL-ALT-ELITE. All rights reserved.</p>
    </footer>
</body>
</html>